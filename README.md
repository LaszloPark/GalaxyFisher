# 这是什么
《银河境界线》手游中钓鱼小游戏的自动脚本。脚本可后台运行，但需保证模拟器窗口不被遮挡。

# 使用方法
1. 前往[银河境界线官网](https://www.galaxy-fantasy.com/main)下载桌面版（MuMu 模拟器版本）
2. 在 MuMu 模拟器的设置-显示设置中，修改分辨率为平板版1280x720(DPI240)
3. 打开游戏，并将模拟器窗口拖到一个不碍事的地方。
4. 安装依赖(`pip install -r requirements.txt`)，运行脚本（`python .\main.py`），连接设备选项时直接回车。
5. 进入任意一个渔场，enjoy it!

# Q&A
问：其他模拟器可以吗？  
答：理论上支持其他模拟器，需指定模拟器窗口的标题（main.py 中 simulator 变量）和相应的端口号（连接设备时手动输入）。未经测试，不保证正常运行。  

问：模拟器卡到惨绝人寰，根本没法钓鱼？  
答：请先使用模拟器自带的问题诊断功能进行修复（右上角菜单 > 问题诊断）。特别地，请留意是否开启VT。以下是一些可参考的资料：  
- [如何开启VT\_MuMu模拟器\_安卓模拟器](https://mumu.163.com/help/20210510/35043_946541.html?fq)  
- [如何减轻模拟器卡顿\_MuMu模拟器\_安卓模拟器](https://mumu.163.com/help/20210513/35048_947490.html)  
- [《银河境界线》推荐配置与常见问题\_MuMu模拟器\_安卓模拟器](https://mumu.163.com/help/20230725/35048_1100574.html)  

问：修正窗口偏移量报错/根本识别不到/乱点一通？  
答：大概率是缩放问题，请参考[在 windows 系统中使用缩放会导致匹配图像识别、错误点击等问题](https://github.com/LaszloPark/GalaxyFisher/issues/2)，后续会修复。如果是其他问题，请提issue，感谢。

问：我不想用 1280x720 分辨率？  
答：请修改 config.json 和相应的模板文件。  

问：为什么又有adb又有win32gui？  
答：因为用adb读取图像的高延迟不足以满足钓鱼需求。写到一半才发现这个问题……所以脚本的逻辑是 win32gui 检测前台窗口 + adb 控制游戏内部行为。  

问：为什么模拟器窗口一直在前面？  
答：脚本内部设置了模拟器窗口前置。  

# One More Thing
部分代码来自[世界弹射物语护肝宝](https://github.com/AshenOneYe/WFHelper)，特此感谢。  
另外，求些好友：8693013815760（目前拿得出手的只有一个百级威风复苏奉献彗星XD）
